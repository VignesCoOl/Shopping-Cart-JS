<!DOCTYPE html>

<head>
    <title>
        Shopping Cart
    </title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Oxygen&display=swap" rel="stylesheet">
    <style>
        img {
            width: 159px;
            height: 318px;
        }
        button {
            text-transform: uppercase;
            font-size: medium;
            padding: 10px;
            color: darkblue;
            font-weight: bold;
            border-radius: 5px;
        }
        button:hover{
            background-color: black;
            color: white;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="nav">
        <input type="checkbox" id="nav-check">
        <div class="nav-header">
            <div class="nav-title">
                Mobile E-Commerce
            </div>
        </div>
        <div class="nav-links">
            <a href="#" class="cart">CART <span style="color: chartreuse; font-weight: bold;">0</span></a>
            <a href="#">HOME</a>
        </div>
    </div>
    <ul class="flex-container">
        <div class="flex-item">
            <img src="samsung.jpg" />
            <h3>Samsung</h3>
            <h3>15,700</h3>
            <button class="add2cart">Add to Cart</button>
        </div>
        <div class="flex-item">
            <img src="oneplus.jpg" />
            <h3>OnePlus</h3>
            <h3>39,900</h3>
            <button class="add2cart">Add to Cart</button>
        </div>
        <div class="flex-item">
            <img src="vivo.jpg" />
            <h3>Vivo</h3>
            <h3>18,600</h3>
            <button class="add2cart">Add to Cart</button>
        </div>
        <div class="flex-item">
            <img src="samsung.jpg" />
            <h3>Samsung</h3>
            <h3>25,000</h3>
            <button class="add2cart">Add to Cart</button>
        </div>
        <div class="flex-item">
            <img src="oneplus.jpg" />
            <h3>OnePlus</h3>
            <h3>39,900</h3>
            <button class="add2cart">Add to Cart</button>
        </div>
    </ul>
    <script>
        let products = [
            {
                name: 'Samsung',
                tag: 'Mobile',
                price: 15700,
                inCart: 0
            },
            {
                name: 'OnePlus',
                tag: 'mobile',
                price: 39900,
                inCart: 0
            },
            {
                name: 'Vivo',
                tag: 'mobile',
                price: 18600,
                inCart: 0
            },
            {
                name: 'Samsung',
                tag: 'Mobile',
                price: 25000,
                inCart: 0
            },       {
                name: 'OnePlus',
                tag: 'mobile',
                price: 39900,
                inCart: 0
            }
        ]
        var carts = document.querySelectorAll(".add2cart");
        for (let i = 0; i < carts.length; i++) {
            carts[i].addEventListener('click', () => {
                cartNumbers(products[i]);
                alert("Product Added to cart");
            })
        }
        function onLoadCart(){
            let productnums = localStorage.getItem("cartnumbers");
            if(productnums){
                document.querySelector(".cart span").textContent= productnums;
            }
        }
        function cartNumbers(product) {
            let productnums = localStorage.getItem("cartnumbers");
            productnums = parseInt(productnums);
            if (productnums) {
                localStorage.setItem("cartnumbers", productnums + 1);
                document.querySelector(".cart span").textContent= productnums+1;
            }
            else {
                localStorage.setItem("cartnumbers", 1);
                document.querySelector(".cart span").textContent=1;
            }
            setItems(product);
        }
        function setItems(product){
            let cartItems = localStorage.getItem("productsIncart");
            cartItems = JSON.parse(cartItems);
            if(cartItems != null){
                cartItems[product.tag].inCart += 1;
            }
            console.log("Cart Items:", cartItems);
            product.inCart = 1;
            cartItems={[product.tag]:product}
            localStorage.setItem("productsIncart", JSON.stringify(cartItems));
        }
        onLoadCart();
    </script>
</body>
</html>